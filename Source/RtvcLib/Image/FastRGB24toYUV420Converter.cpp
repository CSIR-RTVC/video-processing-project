/** @file

MODULE						: FastRGB24toYUV420Converter

TAG								: FRGB24YUVC

FILE NAME					: FastRGB24toYUV420Converter.cpp

DESCRIPTION				: Fast RGB 24 bit to YUV420 colour convertion derived from
										the RGBtoYUV420Converter base class.

REVISION HISTORY	:
									: 

COPYRIGHT					: (c)VICS 2000-2006  all rights resevered - info@videocoding.com

RESTRICTIONS			: The information/data/code contained within this file is 
										the property of VICS limited and has been classified as 
										CONFIDENTIAL.
===========================================================================
*/
#ifdef _WINDOWS
#define WIN32_LEAN_AND_MEAN		// Exclude rarely-used stuff from Windows headers
#include <windows.h>
#else
#include <stdio.h>
#endif

#include <math.h>
#include <string.h>
#include <stdlib.h>

#include "FastRGB24toYUV420Converter.h"

/*
===========================================================================
	Macros.
===========================================================================
*/
#define FRGB24YUVC_RANGECHECK_0TO255(x) ( (((x) <= 255)&&((x) >= 0))?((x)):( ((x) > 255)?(255):(0) ) )
#define FRGB24YUVC_FIXPOINTADJUST(x) ((x) >> 13)

/*
===========================================================================
	Interface Methods.
===========================================================================
*/
/** Fast table look up implementation.
13-point fixed point arithmetic is used. The YUV output is represented with
6 bits per pel and the UV components are adjusted from their -128..127 range
to 0..255.
@param pRgb	: Packed RGB 888 format.
@param pY		: Lum plane.
@param pU		: Chr U plane.
@param pV		: Chr V plane.
@return			: none.
*/
void FastRGB24toYUV420Converter::Convert(void* pRgb, void* pY, void* pU, void* pV)
{
	yuvType*	py = (yuvType *)pY;
	yuvType*	pu = (yuvType *)pU;
	yuvType*	pv = (yuvType *)pV;
	unsigned char* src = (unsigned char *)pRgb;

	// Y1 & Y2 have range 0..255, U & V have range -128..127.
	int	u,v;
	int	r,g,b;

	// Step in 2x2 pel blocks. (4 pels per block).
	int xBlks = _width >> 1;
	int yBlks = _height >> 1;
	for(int yb = 0; yb < yBlks; yb++)
   for(int xb = 0; xb < xBlks; xb++)
	{
    int							chrOff	= yb*xBlks + xb;
    int							lumOff	= (yb*_width + xb) << 1;
    unsigned char*	t				= src + lumOff*3;

		// Top left pel.  255->0.999.
		b = *t++;
		g = *t++;
		r = *t++;
		py[lumOff] = (yuvType)((R0[r] + R1[g] + R2[b]) >> 20);

		u = FRGB24YUVC_FIXPOINTADJUST(R3[b] + R4[r] + R5[g]);
		v = FRGB24YUVC_FIXPOINTADJUST(R6[r] + R7[g] + R8[b]);

		// Top right pel.
		b = *t++;
		g = *t++;
		r = *t++;
		py[lumOff+1] = (yuvType)((R0[r] + R1[g] + R2[b]) >> 20);

		u += FRGB24YUVC_FIXPOINTADJUST(R3[b] + R4[r] + R5[g]);
		v += FRGB24YUVC_FIXPOINTADJUST(R6[r] + R7[g] + R8[b]);

    lumOff += _width;
    t = t + _width*3 - 6;
		// Bottom left pel.  255->0.999.
		b = *t++;
		g = *t++;
		r = *t++;
		py[lumOff] = (yuvType)((R0[r] + R1[g] + R2[b]) >> 20);

		u += FRGB24YUVC_FIXPOINTADJUST(R3[b] + R4[r] + R5[g]);
		v += FRGB24YUVC_FIXPOINTADJUST(R6[r] + R7[g] + R8[b]);

		// Bottom right pel.
		b = *t++;
		g = *t++;
		r = *t++;
		py[lumOff+1] = (yuvType)((R0[r] + R1[g] + R2[b]) >> 20);

		u += FRGB24YUVC_FIXPOINTADJUST(R3[b] + R4[r] + R5[g]);
		v += FRGB24YUVC_FIXPOINTADJUST(R6[r] + R7[g] + R8[b]);

		// Average the 4 chr values and level shift to 0..255 range.
		pu[chrOff] = (short)(FRGB24YUVC_FIXPOINTADJUST( u << 6 ) + 128) >> 2;
		pv[chrOff] = (short)(FRGB24YUVC_FIXPOINTADJUST( v << 6 ) + 128) >> 2;
 	}//end for xb & yb...

}//end Convert.

const int FastRGB24toYUV420Converter::R0[] =
{
	         0,
	     78368,
	    156736,
	    235104,
	    313472,
	    391840,
	    470208,
	    548576,
	    626944,
	    705312,
	    783680,
	    862048,
	    940416,
	   1018784,
	   1097152,
	   1175520,
	   1253888,
	   1332256,
	   1410624,
	   1488992,
	   1567360,
	   1645728,
	   1724096,
	   1802464,
	   1880832,
	   1959200,
	   2037568,
	   2115936,
	   2194304,
	   2272672,
	   2351040,
	   2429408,
	   2507776,
	   2586144,
	   2664512,
	   2742880,
	   2821248,
	   2899616,
	   2977984,
	   3056352,
	   3134720,
	   3213088,
	   3291456,
	   3369824,
	   3448192,
	   3526560,
	   3604928,
	   3683296,
	   3761664,
	   3840032,
	   3918400,
	   3996768,
	   4075136,
	   4153504,
	   4231872,
	   4310240,
	   4388608,
	   4466976,
	   4545344,
	   4623712,
	   4702080,
	   4780448,
	   4858816,
	   4937184,
	   5015552,
	   5093920,
	   5172288,
	   5250656,
	   5329024,
	   5407392,
	   5485760,
	   5564128,
	   5642496,
	   5720864,
	   5799232,
	   5877600,
	   5955968,
	   6034336,
	   6112704,
	   6191072,
	   6269440,
	   6347808,
	   6426176,
	   6504544,
	   6582912,
	   6661280,
	   6739648,
	   6818016,
	   6896384,
	   6974752,
	   7053120,
	   7131488,
	   7209856,
	   7288224,
	   7366592,
	   7444960,
	   7523328,
	   7601696,
	   7680064,
	   7758432,
	   7836800,
	   7915168,
	   7993536,
	   8071904,
	   8150272,
	   8228640,
	   8307008,
	   8385376,
	   8463744,
	   8542112,
	   8620480,
	   8698848,
	   8777216,
	   8855584,
	   8933952,
	   9012320,
	   9090688,
	   9169056,
	   9247424,
	   9325792,
	   9404160,
	   9482528,
	   9560896,
	   9639264,
	   9717632,
	   9796000,
	   9874368,
	   9952736,
	  10031104,
	  10109472,
	  10187840,
	  10266208,
	  10344576,
	  10422944,
	  10501312,
	  10579680,
	  10658048,
	  10736416,
	  10814784,
	  10893152,
	  10971520,
	  11049888,
	  11128256,
	  11206624,
	  11284992,
	  11363360,
	  11441728,
	  11520096,
	  11598464,
	  11676832,
	  11755200,
	  11833568,
	  11911936,
	  11990304,
	  12068672,
	  12147040,
	  12225408,
	  12303776,
	  12382144,
	  12460512,
	  12538880,
	  12617248,
	  12695616,
	  12773984,
	  12852352,
	  12930720,
	  13009088,
	  13087456,
	  13165824,
	  13244192,
	  13322560,
	  13400928,
	  13479296,
	  13557664,
	  13636032,
	  13714400,
	  13792768,
	  13871136,
	  13949504,
	  14027872,
	  14106240,
	  14184608,
	  14262976,
	  14341344,
	  14419712,
	  14498080,
	  14576448,
	  14654816,
	  14733184,
	  14811552,
	  14889920,
	  14968288,
	  15046656,
	  15125024,
	  15203392,
	  15281760,
	  15360128,
	  15438496,
	  15516864,
	  15595232,
	  15673600,
	  15751968,
	  15830336,
	  15908704,
	  15987072,
	  16065440,
	  16143808,
	  16222176,
	  16300544,
	  16378912,
	  16457280,
	  16535648,
	  16614016,
	  16692384,
	  16770752,
	  16849120,
	  16927488,
	  17005856,
	  17084224,
	  17162592,
	  17240960,
	  17319328,
	  17397696,
	  17476064,
	  17554432,
	  17632800,
	  17711168,
	  17789536,
	  17867904,
	  17946272,
	  18024640,
	  18103008,
	  18181376,
	  18259744,
	  18338112,
	  18416480,
	  18494848,
	  18573216,
	  18651584,
	  18729952,
	  18808320,
	  18886688,
	  18965056,
	  19043424,
	  19121792,
	  19200160,
	  19278528,
	  19356896,
	  19435264,
	  19513632,
	  19592000,
	  19670368,
	  19748736,
	  19827104,
	  19905472,
	  19983840,
};

const int FastRGB24toYUV420Converter::R1[] =
{
	         0,
	    153888,
	    307776,
	    461664,
	    615552,
	    769440,
	    923328,
	   1077216,
	   1231104,
	   1384992,
	   1538880,
	   1692768,
	   1846656,
	   2000544,
	   2154432,
	   2308320,
	   2462208,
	   2616096,
	   2769984,
	   2923872,
	   3077760,
	   3231648,
	   3385536,
	   3539424,
	   3693312,
	   3847200,
	   4001088,
	   4154976,
	   4308864,
	   4462752,
	   4616640,
	   4770528,
	   4924416,
	   5078304,
	   5232192,
	   5386080,
	   5539968,
	   5693856,
	   5847744,
	   6001632,
	   6155520,
	   6309408,
	   6463296,
	   6617184,
	   6771072,
	   6924960,
	   7078848,
	   7232736,
	   7386624,
	   7540512,
	   7694400,
	   7848288,
	   8002176,
	   8156064,
	   8309952,
	   8463840,
	   8617728,
	   8771616,
	   8925504,
	   9079392,
	   9233280,
	   9387168,
	   9541056,
	   9694944,
	   9848832,
	  10002720,
	  10156608,
	  10310496,
	  10464384,
	  10618272,
	  10772160,
	  10926048,
	  11079936,
	  11233824,
	  11387712,
	  11541600,
	  11695488,
	  11849376,
	  12003264,
	  12157152,
	  12311040,
	  12464928,
	  12618816,
	  12772704,
	  12926592,
	  13080480,
	  13234368,
	  13388256,
	  13542144,
	  13696032,
	  13849920,
	  14003808,
	  14157696,
	  14311584,
	  14465472,
	  14619360,
	  14773248,
	  14927136,
	  15081024,
	  15234912,
	  15388800,
	  15542688,
	  15696576,
	  15850464,
	  16004352,
	  16158240,
	  16312128,
	  16466016,
	  16619904,
	  16773792,
	  16927680,
	  17081568,
	  17235456,
	  17389344,
	  17543232,
	  17697120,
	  17851008,
	  18004896,
	  18158784,
	  18312672,
	  18466560,
	  18620448,
	  18774336,
	  18928224,
	  19082112,
	  19236000,
	  19389888,
	  19543776,
	  19697664,
	  19851552,
	  20005440,
	  20159328,
	  20313216,
	  20467104,
	  20620992,
	  20774880,
	  20928768,
	  21082656,
	  21236544,
	  21390432,
	  21544320,
	  21698208,
	  21852096,
	  22005984,
	  22159872,
	  22313760,
	  22467648,
	  22621536,
	  22775424,
	  22929312,
	  23083200,
	  23237088,
	  23390976,
	  23544864,
	  23698752,
	  23852640,
	  24006528,
	  24160416,
	  24314304,
	  24468192,
	  24622080,
	  24775968,
	  24929856,
	  25083744,
	  25237632,
	  25391520,
	  25545408,
	  25699296,
	  25853184,
	  26007072,
	  26160960,
	  26314848,
	  26468736,
	  26622624,
	  26776512,
	  26930400,
	  27084288,
	  27238176,
	  27392064,
	  27545952,
	  27699840,
	  27853728,
	  28007616,
	  28161504,
	  28315392,
	  28469280,
	  28623168,
	  28777056,
	  28930944,
	  29084832,
	  29238720,
	  29392608,
	  29546496,
	  29700384,
	  29854272,
	  30008160,
	  30162048,
	  30315936,
	  30469824,
	  30623712,
	  30777600,
	  30931488,
	  31085376,
	  31239264,
	  31393152,
	  31547040,
	  31700928,
	  31854816,
	  32008704,
	  32162592,
	  32316480,
	  32470368,
	  32624256,
	  32778144,
	  32932032,
	  33085920,
	  33239808,
	  33393696,
	  33547584,
	  33701472,
	  33855360,
	  34009248,
	  34163136,
	  34317024,
	  34470912,
	  34624800,
	  34778688,
	  34932576,
	  35086464,
	  35240352,
	  35394240,
	  35548128,
	  35702016,
	  35855904,
	  36009792,
	  36163680,
	  36317568,
	  36471456,
	  36625344,
	  36779232,
	  36933120,
	  37087008,
	  37240896,
	  37394784,
	  37548672,
	  37702560,
	  37856448,
	  38010336,
	  38164224,
	  38318112,
	  38472000,
	  38625888,
	  38779776,
	  38933664,
	  39087552,
	  39241440,
};

const int FastRGB24toYUV420Converter::R2[] =
{
	         0,
	     29888,
	     59776,
	     89664,
	    119552,
	    149440,
	    179328,
	    209216,
	    239104,
	    268992,
	    298880,
	    328768,
	    358656,
	    388544,
	    418432,
	    448320,
	    478208,
	    508096,
	    537984,
	    567872,
	    597760,
	    627648,
	    657536,
	    687424,
	    717312,
	    747200,
	    777088,
	    806976,
	    836864,
	    866752,
	    896640,
	    926528,
	    956416,
	    986304,
	   1016192,
	   1046080,
	   1075968,
	   1105856,
	   1135744,
	   1165632,
	   1195520,
	   1225408,
	   1255296,
	   1285184,
	   1315072,
	   1344960,
	   1374848,
	   1404736,
	   1434624,
	   1464512,
	   1494400,
	   1524288,
	   1554176,
	   1584064,
	   1613952,
	   1643840,
	   1673728,
	   1703616,
	   1733504,
	   1763392,
	   1793280,
	   1823168,
	   1853056,
	   1882944,
	   1912832,
	   1942720,
	   1972608,
	   2002496,
	   2032384,
	   2062272,
	   2092160,
	   2122048,
	   2151936,
	   2181824,
	   2211712,
	   2241600,
	   2271488,
	   2301376,
	   2331264,
	   2361152,
	   2391040,
	   2420928,
	   2450816,
	   2480704,
	   2510592,
	   2540480,
	   2570368,
	   2600256,
	   2630144,
	   2660032,
	   2689920,
	   2719808,
	   2749696,
	   2779584,
	   2809472,
	   2839360,
	   2869248,
	   2899136,
	   2929024,
	   2958912,
	   2988800,
	   3018688,
	   3048576,
	   3078464,
	   3108352,
	   3138240,
	   3168128,
	   3198016,
	   3227904,
	   3257792,
	   3287680,
	   3317568,
	   3347456,
	   3377344,
	   3407232,
	   3437120,
	   3467008,
	   3496896,
	   3526784,
	   3556672,
	   3586560,
	   3616448,
	   3646336,
	   3676224,
	   3706112,
	   3736000,
	   3765888,
	   3795776,
	   3825664,
	   3855552,
	   3885440,
	   3915328,
	   3945216,
	   3975104,
	   4004992,
	   4034880,
	   4064768,
	   4094656,
	   4124544,
	   4154432,
	   4184320,
	   4214208,
	   4244096,
	   4273984,
	   4303872,
	   4333760,
	   4363648,
	   4393536,
	   4423424,
	   4453312,
	   4483200,
	   4513088,
	   4542976,
	   4572864,
	   4602752,
	   4632640,
	   4662528,
	   4692416,
	   4722304,
	   4752192,
	   4782080,
	   4811968,
	   4841856,
	   4871744,
	   4901632,
	   4931520,
	   4961408,
	   4991296,
	   5021184,
	   5051072,
	   5080960,
	   5110848,
	   5140736,
	   5170624,
	   5200512,
	   5230400,
	   5260288,
	   5290176,
	   5320064,
	   5349952,
	   5379840,
	   5409728,
	   5439616,
	   5469504,
	   5499392,
	   5529280,
	   5559168,
	   5589056,
	   5618944,
	   5648832,
	   5678720,
	   5708608,
	   5738496,
	   5768384,
	   5798272,
	   5828160,
	   5858048,
	   5887936,
	   5917824,
	   5947712,
	   5977600,
	   6007488,
	   6037376,
	   6067264,
	   6097152,
	   6127040,
	   6156928,
	   6186816,
	   6216704,
	   6246592,
	   6276480,
	   6306368,
	   6336256,
	   6366144,
	   6396032,
	   6425920,
	   6455808,
	   6485696,
	   6515584,
	   6545472,
	   6575360,
	   6605248,
	   6635136,
	   6665024,
	   6694912,
	   6724800,
	   6754688,
	   6784576,
	   6814464,
	   6844352,
	   6874240,
	   6904128,
	   6934016,
	   6963904,
	   6993792,
	   7023680,
	   7053568,
	   7083456,
	   7113344,
	   7143232,
	   7173120,
	   7203008,
	   7232896,
	   7262784,
	   7292672,
	   7322560,
	   7352448,
	   7382336,
	   7412224,
	   7442112,
	   7472000,
	   7501888,
	   7531776,
	   7561664,
	   7591552,
	   7621440,
};

const int FastRGB24toYUV420Converter::R3[] =
{
	         0,
	    114304,
	    228608,
	    342912,
	    457216,
	    571520,
	    685824,
	    800128,
	    914432,
	   1028736,
	   1143040,
	   1257344,
	   1371648,
	   1485952,
	   1600256,
	   1714560,
	   1828864,
	   1943168,
	   2057472,
	   2171776,
	   2286080,
	   2400384,
	   2514688,
	   2628992,
	   2743296,
	   2857600,
	   2971904,
	   3086208,
	   3200512,
	   3314816,
	   3429120,
	   3543424,
	   3657728,
	   3772032,
	   3886336,
	   4000640,
	   4114944,
	   4229248,
	   4343552,
	   4457856,
	   4572160,
	   4686464,
	   4800768,
	   4915072,
	   5029376,
	   5143680,
	   5257984,
	   5372288,
	   5486592,
	   5600896,
	   5715200,
	   5829504,
	   5943808,
	   6058112,
	   6172416,
	   6286720,
	   6401024,
	   6515328,
	   6629632,
	   6743936,
	   6858240,
	   6972544,
	   7086848,
	   7201152,
	   7315456,
	   7429760,
	   7544064,
	   7658368,
	   7772672,
	   7886976,
	   8001280,
	   8115584,
	   8229888,
	   8344192,
	   8458496,
	   8572800,
	   8687104,
	   8801408,
	   8915712,
	   9030016,
	   9144320,
	   9258624,
	   9372928,
	   9487232,
	   9601536,
	   9715840,
	   9830144,
	   9944448,
	  10058752,
	  10173056,
	  10287360,
	  10401664,
	  10515968,
	  10630272,
	  10744576,
	  10858880,
	  10973184,
	  11087488,
	  11201792,
	  11316096,
	  11430400,
	  11544704,
	  11659008,
	  11773312,
	  11887616,
	  12001920,
	  12116224,
	  12230528,
	  12344832,
	  12459136,
	  12573440,
	  12687744,
	  12802048,
	  12916352,
	  13030656,
	  13144960,
	  13259264,
	  13373568,
	  13487872,
	  13602176,
	  13716480,
	  13830784,
	  13945088,
	  14059392,
	  14173696,
	  14288000,
	  14402304,
	  14516608,
	  14630912,
	  14745216,
	  14859520,
	  14973824,
	  15088128,
	  15202432,
	  15316736,
	  15431040,
	  15545344,
	  15659648,
	  15773952,
	  15888256,
	  16002560,
	  16116864,
	  16231168,
	  16345472,
	  16459776,
	  16574080,
	  16688384,
	  16802688,
	  16916992,
	  17031296,
	  17145600,
	  17259904,
	  17374208,
	  17488512,
	  17602816,
	  17717120,
	  17831424,
	  17945728,
	  18060032,
	  18174336,
	  18288640,
	  18402944,
	  18517248,
	  18631552,
	  18745856,
	  18860160,
	  18974464,
	  19088768,
	  19203072,
	  19317376,
	  19431680,
	  19545984,
	  19660288,
	  19774592,
	  19888896,
	  20003200,
	  20117504,
	  20231808,
	  20346112,
	  20460416,
	  20574720,
	  20689024,
	  20803328,
	  20917632,
	  21031936,
	  21146240,
	  21260544,
	  21374848,
	  21489152,
	  21603456,
	  21717760,
	  21832064,
	  21946368,
	  22060672,
	  22174976,
	  22289280,
	  22403584,
	  22517888,
	  22632192,
	  22746496,
	  22860800,
	  22975104,
	  23089408,
	  23203712,
	  23318016,
	  23432320,
	  23546624,
	  23660928,
	  23775232,
	  23889536,
	  24003840,
	  24118144,
	  24232448,
	  24346752,
	  24461056,
	  24575360,
	  24689664,
	  24803968,
	  24918272,
	  25032576,
	  25146880,
	  25261184,
	  25375488,
	  25489792,
	  25604096,
	  25718400,
	  25832704,
	  25947008,
	  26061312,
	  26175616,
	  26289920,
	  26404224,
	  26518528,
	  26632832,
	  26747136,
	  26861440,
	  26975744,
	  27090048,
	  27204352,
	  27318656,
	  27432960,
	  27547264,
	  27661568,
	  27775872,
	  27890176,
	  28004480,
	  28118784,
	  28233088,
	  28347392,
	  28461696,
	  28576000,
	  28690304,
	  28804608,
	  28918912,
	  29033216,
	  29147520,
};

const int FastRGB24toYUV420Converter::R4[] =
{
	         0,
	    -38528,
	    -77056,
	   -115584,
	   -154112,
	   -192640,
	   -231168,
	   -269696,
	   -308224,
	   -346752,
	   -385280,
	   -423808,
	   -462336,
	   -500864,
	   -539392,
	   -577920,
	   -616448,
	   -654976,
	   -693504,
	   -732032,
	   -770560,
	   -809088,
	   -847616,
	   -886144,
	   -924672,
	   -963200,
	  -1001728,
	  -1040256,
	  -1078784,
	  -1117312,
	  -1155840,
	  -1194368,
	  -1232896,
	  -1271424,
	  -1309952,
	  -1348480,
	  -1387008,
	  -1425536,
	  -1464064,
	  -1502592,
	  -1541120,
	  -1579648,
	  -1618176,
	  -1656704,
	  -1695232,
	  -1733760,
	  -1772288,
	  -1810816,
	  -1849344,
	  -1887872,
	  -1926400,
	  -1964928,
	  -2003456,
	  -2041984,
	  -2080512,
	  -2119040,
	  -2157568,
	  -2196096,
	  -2234624,
	  -2273152,
	  -2311680,
	  -2350208,
	  -2388736,
	  -2427264,
	  -2465792,
	  -2504320,
	  -2542848,
	  -2581376,
	  -2619904,
	  -2658432,
	  -2696960,
	  -2735488,
	  -2774016,
	  -2812544,
	  -2851072,
	  -2889600,
	  -2928128,
	  -2966656,
	  -3005184,
	  -3043712,
	  -3082240,
	  -3120768,
	  -3159296,
	  -3197824,
	  -3236352,
	  -3274880,
	  -3313408,
	  -3351936,
	  -3390464,
	  -3428992,
	  -3467520,
	  -3506048,
	  -3544576,
	  -3583104,
	  -3621632,
	  -3660160,
	  -3698688,
	  -3737216,
	  -3775744,
	  -3814272,
	  -3852800,
	  -3891328,
	  -3929856,
	  -3968384,
	  -4006912,
	  -4045440,
	  -4083968,
	  -4122496,
	  -4161024,
	  -4199552,
	  -4238080,
	  -4276608,
	  -4315136,
	  -4353664,
	  -4392192,
	  -4430720,
	  -4469248,
	  -4507776,
	  -4546304,
	  -4584832,
	  -4623360,
	  -4661888,
	  -4700416,
	  -4738944,
	  -4777472,
	  -4816000,
	  -4854528,
	  -4893056,
	  -4931584,
	  -4970112,
	  -5008640,
	  -5047168,
	  -5085696,
	  -5124224,
	  -5162752,
	  -5201280,
	  -5239808,
	  -5278336,
	  -5316864,
	  -5355392,
	  -5393920,
	  -5432448,
	  -5470976,
	  -5509504,
	  -5548032,
	  -5586560,
	  -5625088,
	  -5663616,
	  -5702144,
	  -5740672,
	  -5779200,
	  -5817728,
	  -5856256,
	  -5894784,
	  -5933312,
	  -5971840,
	  -6010368,
	  -6048896,
	  -6087424,
	  -6125952,
	  -6164480,
	  -6203008,
	  -6241536,
	  -6280064,
	  -6318592,
	  -6357120,
	  -6395648,
	  -6434176,
	  -6472704,
	  -6511232,
	  -6549760,
	  -6588288,
	  -6626816,
	  -6665344,
	  -6703872,
	  -6742400,
	  -6780928,
	  -6819456,
	  -6857984,
	  -6896512,
	  -6935040,
	  -6973568,
	  -7012096,
	  -7050624,
	  -7089152,
	  -7127680,
	  -7166208,
	  -7204736,
	  -7243264,
	  -7281792,
	  -7320320,
	  -7358848,
	  -7397376,
	  -7435904,
	  -7474432,
	  -7512960,
	  -7551488,
	  -7590016,
	  -7628544,
	  -7667072,
	  -7705600,
	  -7744128,
	  -7782656,
	  -7821184,
	  -7859712,
	  -7898240,
	  -7936768,
	  -7975296,
	  -8013824,
	  -8052352,
	  -8090880,
	  -8129408,
	  -8167936,
	  -8206464,
	  -8244992,
	  -8283520,
	  -8322048,
	  -8360576,
	  -8399104,
	  -8437632,
	  -8476160,
	  -8514688,
	  -8553216,
	  -8591744,
	  -8630272,
	  -8668800,
	  -8707328,
	  -8745856,
	  -8784384,
	  -8822912,
	  -8861440,
	  -8899968,
	  -8938496,
	  -8977024,
	  -9015552,
	  -9054080,
	  -9092608,
	  -9131136,
	  -9169664,
	  -9208192,
	  -9246720,
	  -9285248,
	  -9323776,
	  -9362304,
	  -9400832,
	  -9439360,
	  -9477888,
	  -9516416,
	  -9554944,
	  -9593472,
	  -9632000,
	  -9670528,
	  -9709056,
	  -9747584,
	  -9786112,
	  -9824640,
};

const int FastRGB24toYUV420Converter::R5[] =
{
	         0,
	    -75744,
	   -151488,
	   -227232,
	   -302976,
	   -378720,
	   -454464,
	   -530208,
	   -605952,
	   -681696,
	   -757440,
	   -833184,
	   -908928,
	   -984672,
	  -1060416,
	  -1136160,
	  -1211904,
	  -1287648,
	  -1363392,
	  -1439136,
	  -1514880,
	  -1590624,
	  -1666368,
	  -1742112,
	  -1817856,
	  -1893600,
	  -1969344,
	  -2045088,
	  -2120832,
	  -2196576,
	  -2272320,
	  -2348064,
	  -2423808,
	  -2499552,
	  -2575296,
	  -2651040,
	  -2726784,
	  -2802528,
	  -2878272,
	  -2954016,
	  -3029760,
	  -3105504,
	  -3181248,
	  -3256992,
	  -3332736,
	  -3408480,
	  -3484224,
	  -3559968,
	  -3635712,
	  -3711456,
	  -3787200,
	  -3862944,
	  -3938688,
	  -4014432,
	  -4090176,
	  -4165920,
	  -4241664,
	  -4317408,
	  -4393152,
	  -4468896,
	  -4544640,
	  -4620384,
	  -4696128,
	  -4771872,
	  -4847616,
	  -4923360,
	  -4999104,
	  -5074848,
	  -5150592,
	  -5226336,
	  -5302080,
	  -5377824,
	  -5453568,
	  -5529312,
	  -5605056,
	  -5680800,
	  -5756544,
	  -5832288,
	  -5908032,
	  -5983776,
	  -6059520,
	  -6135264,
	  -6211008,
	  -6286752,
	  -6362496,
	  -6438240,
	  -6513984,
	  -6589728,
	  -6665472,
	  -6741216,
	  -6816960,
	  -6892704,
	  -6968448,
	  -7044192,
	  -7119936,
	  -7195680,
	  -7271424,
	  -7347168,
	  -7422912,
	  -7498656,
	  -7574400,
	  -7650144,
	  -7725888,
	  -7801632,
	  -7877376,
	  -7953120,
	  -8028864,
	  -8104608,
	  -8180352,
	  -8256096,
	  -8331840,
	  -8407584,
	  -8483328,
	  -8559072,
	  -8634816,
	  -8710560,
	  -8786304,
	  -8862048,
	  -8937792,
	  -9013536,
	  -9089280,
	  -9165024,
	  -9240768,
	  -9316512,
	  -9392256,
	  -9468000,
	  -9543744,
	  -9619488,
	  -9695232,
	  -9770976,
	  -9846720,
	  -9922464,
	  -9998208,
	 -10073952,
	 -10149696,
	 -10225440,
	 -10301184,
	 -10376928,
	 -10452672,
	 -10528416,
	 -10604160,
	 -10679904,
	 -10755648,
	 -10831392,
	 -10907136,
	 -10982880,
	 -11058624,
	 -11134368,
	 -11210112,
	 -11285856,
	 -11361600,
	 -11437344,
	 -11513088,
	 -11588832,
	 -11664576,
	 -11740320,
	 -11816064,
	 -11891808,
	 -11967552,
	 -12043296,
	 -12119040,
	 -12194784,
	 -12270528,
	 -12346272,
	 -12422016,
	 -12497760,
	 -12573504,
	 -12649248,
	 -12724992,
	 -12800736,
	 -12876480,
	 -12952224,
	 -13027968,
	 -13103712,
	 -13179456,
	 -13255200,
	 -13330944,
	 -13406688,
	 -13482432,
	 -13558176,
	 -13633920,
	 -13709664,
	 -13785408,
	 -13861152,
	 -13936896,
	 -14012640,
	 -14088384,
	 -14164128,
	 -14239872,
	 -14315616,
	 -14391360,
	 -14467104,
	 -14542848,
	 -14618592,
	 -14694336,
	 -14770080,
	 -14845824,
	 -14921568,
	 -14997312,
	 -15073056,
	 -15148800,
	 -15224544,
	 -15300288,
	 -15376032,
	 -15451776,
	 -15527520,
	 -15603264,
	 -15679008,
	 -15754752,
	 -15830496,
	 -15906240,
	 -15981984,
	 -16057728,
	 -16133472,
	 -16209216,
	 -16284960,
	 -16360704,
	 -16436448,
	 -16512192,
	 -16587936,
	 -16663680,
	 -16739424,
	 -16815168,
	 -16890912,
	 -16966656,
	 -17042400,
	 -17118144,
	 -17193888,
	 -17269632,
	 -17345376,
	 -17421120,
	 -17496864,
	 -17572608,
	 -17648352,
	 -17724096,
	 -17799840,
	 -17875584,
	 -17951328,
	 -18027072,
	 -18102816,
	 -18178560,
	 -18254304,
	 -18330048,
	 -18405792,
	 -18481536,
	 -18557280,
	 -18633024,
	 -18708768,
	 -18784512,
	 -18860256,
	 -18936000,
	 -19011744,
	 -19087488,
	 -19163232,
	 -19238976,
	 -19314720,
};

const int FastRGB24toYUV420Converter::R6[] =
{
	         0,
	    161216,
	    322432,
	    483648,
	    644864,
	    806080,
	    967296,
	   1128512,
	   1289728,
	   1450944,
	   1612160,
	   1773376,
	   1934592,
	   2095808,
	   2257024,
	   2418240,
	   2579456,
	   2740672,
	   2901888,
	   3063104,
	   3224320,
	   3385536,
	   3546752,
	   3707968,
	   3869184,
	   4030400,
	   4191616,
	   4352832,
	   4514048,
	   4675264,
	   4836480,
	   4997696,
	   5158912,
	   5320128,
	   5481344,
	   5642560,
	   5803776,
	   5964992,
	   6126208,
	   6287424,
	   6448640,
	   6609856,
	   6771072,
	   6932288,
	   7093504,
	   7254720,
	   7415936,
	   7577152,
	   7738368,
	   7899584,
	   8060800,
	   8222016,
	   8383232,
	   8544448,
	   8705664,
	   8866880,
	   9028096,
	   9189312,
	   9350528,
	   9511744,
	   9672960,
	   9834176,
	   9995392,
	  10156608,
	  10317824,
	  10479040,
	  10640256,
	  10801472,
	  10962688,
	  11123904,
	  11285120,
	  11446336,
	  11607552,
	  11768768,
	  11929984,
	  12091200,
	  12252416,
	  12413632,
	  12574848,
	  12736064,
	  12897280,
	  13058496,
	  13219712,
	  13380928,
	  13542144,
	  13703360,
	  13864576,
	  14025792,
	  14187008,
	  14348224,
	  14509440,
	  14670656,
	  14831872,
	  14993088,
	  15154304,
	  15315520,
	  15476736,
	  15637952,
	  15799168,
	  15960384,
	  16121600,
	  16282816,
	  16444032,
	  16605248,
	  16766464,
	  16927680,
	  17088896,
	  17250112,
	  17411328,
	  17572544,
	  17733760,
	  17894976,
	  18056192,
	  18217408,
	  18378624,
	  18539840,
	  18701056,
	  18862272,
	  19023488,
	  19184704,
	  19345920,
	  19507136,
	  19668352,
	  19829568,
	  19990784,
	  20152000,
	  20313216,
	  20474432,
	  20635648,
	  20796864,
	  20958080,
	  21119296,
	  21280512,
	  21441728,
	  21602944,
	  21764160,
	  21925376,
	  22086592,
	  22247808,
	  22409024,
	  22570240,
	  22731456,
	  22892672,
	  23053888,
	  23215104,
	  23376320,
	  23537536,
	  23698752,
	  23859968,
	  24021184,
	  24182400,
	  24343616,
	  24504832,
	  24666048,
	  24827264,
	  24988480,
	  25149696,
	  25310912,
	  25472128,
	  25633344,
	  25794560,
	  25955776,
	  26116992,
	  26278208,
	  26439424,
	  26600640,
	  26761856,
	  26923072,
	  27084288,
	  27245504,
	  27406720,
	  27567936,
	  27729152,
	  27890368,
	  28051584,
	  28212800,
	  28374016,
	  28535232,
	  28696448,
	  28857664,
	  29018880,
	  29180096,
	  29341312,
	  29502528,
	  29663744,
	  29824960,
	  29986176,
	  30147392,
	  30308608,
	  30469824,
	  30631040,
	  30792256,
	  30953472,
	  31114688,
	  31275904,
	  31437120,
	  31598336,
	  31759552,
	  31920768,
	  32081984,
	  32243200,
	  32404416,
	  32565632,
	  32726848,
	  32888064,
	  33049280,
	  33210496,
	  33371712,
	  33532928,
	  33694144,
	  33855360,
	  34016576,
	  34177792,
	  34339008,
	  34500224,
	  34661440,
	  34822656,
	  34983872,
	  35145088,
	  35306304,
	  35467520,
	  35628736,
	  35789952,
	  35951168,
	  36112384,
	  36273600,
	  36434816,
	  36596032,
	  36757248,
	  36918464,
	  37079680,
	  37240896,
	  37402112,
	  37563328,
	  37724544,
	  37885760,
	  38046976,
	  38208192,
	  38369408,
	  38530624,
	  38691840,
	  38853056,
	  39014272,
	  39175488,
	  39336704,
	  39497920,
	  39659136,
	  39820352,
	  39981568,
	  40142784,
	  40304000,
	  40465216,
	  40626432,
	  40787648,
	  40948864,
	  41110080,
};

const int FastRGB24toYUV420Converter::R7[] =
{
	         0,
	   -135008,
	   -270016,
	   -405024,
	   -540032,
	   -675040,
	   -810048,
	   -945056,
	  -1080064,
	  -1215072,
	  -1350080,
	  -1485088,
	  -1620096,
	  -1755104,
	  -1890112,
	  -2025120,
	  -2160128,
	  -2295136,
	  -2430144,
	  -2565152,
	  -2700160,
	  -2835168,
	  -2970176,
	  -3105184,
	  -3240192,
	  -3375200,
	  -3510208,
	  -3645216,
	  -3780224,
	  -3915232,
	  -4050240,
	  -4185248,
	  -4320256,
	  -4455264,
	  -4590272,
	  -4725280,
	  -4860288,
	  -4995296,
	  -5130304,
	  -5265312,
	  -5400320,
	  -5535328,
	  -5670336,
	  -5805344,
	  -5940352,
	  -6075360,
	  -6210368,
	  -6345376,
	  -6480384,
	  -6615392,
	  -6750400,
	  -6885408,
	  -7020416,
	  -7155424,
	  -7290432,
	  -7425440,
	  -7560448,
	  -7695456,
	  -7830464,
	  -7965472,
	  -8100480,
	  -8235488,
	  -8370496,
	  -8505504,
	  -8640512,
	  -8775520,
	  -8910528,
	  -9045536,
	  -9180544,
	  -9315552,
	  -9450560,
	  -9585568,
	  -9720576,
	  -9855584,
	  -9990592,
	 -10125600,
	 -10260608,
	 -10395616,
	 -10530624,
	 -10665632,
	 -10800640,
	 -10935648,
	 -11070656,
	 -11205664,
	 -11340672,
	 -11475680,
	 -11610688,
	 -11745696,
	 -11880704,
	 -12015712,
	 -12150720,
	 -12285728,
	 -12420736,
	 -12555744,
	 -12690752,
	 -12825760,
	 -12960768,
	 -13095776,
	 -13230784,
	 -13365792,
	 -13500800,
	 -13635808,
	 -13770816,
	 -13905824,
	 -14040832,
	 -14175840,
	 -14310848,
	 -14445856,
	 -14580864,
	 -14715872,
	 -14850880,
	 -14985888,
	 -15120896,
	 -15255904,
	 -15390912,
	 -15525920,
	 -15660928,
	 -15795936,
	 -15930944,
	 -16065952,
	 -16200960,
	 -16335968,
	 -16470976,
	 -16605984,
	 -16740992,
	 -16876000,
	 -17011008,
	 -17146016,
	 -17281024,
	 -17416032,
	 -17551040,
	 -17686048,
	 -17821056,
	 -17956064,
	 -18091072,
	 -18226080,
	 -18361088,
	 -18496096,
	 -18631104,
	 -18766112,
	 -18901120,
	 -19036128,
	 -19171136,
	 -19306144,
	 -19441152,
	 -19576160,
	 -19711168,
	 -19846176,
	 -19981184,
	 -20116192,
	 -20251200,
	 -20386208,
	 -20521216,
	 -20656224,
	 -20791232,
	 -20926240,
	 -21061248,
	 -21196256,
	 -21331264,
	 -21466272,
	 -21601280,
	 -21736288,
	 -21871296,
	 -22006304,
	 -22141312,
	 -22276320,
	 -22411328,
	 -22546336,
	 -22681344,
	 -22816352,
	 -22951360,
	 -23086368,
	 -23221376,
	 -23356384,
	 -23491392,
	 -23626400,
	 -23761408,
	 -23896416,
	 -24031424,
	 -24166432,
	 -24301440,
	 -24436448,
	 -24571456,
	 -24706464,
	 -24841472,
	 -24976480,
	 -25111488,
	 -25246496,
	 -25381504,
	 -25516512,
	 -25651520,
	 -25786528,
	 -25921536,
	 -26056544,
	 -26191552,
	 -26326560,
	 -26461568,
	 -26596576,
	 -26731584,
	 -26866592,
	 -27001600,
	 -27136608,
	 -27271616,
	 -27406624,
	 -27541632,
	 -27676640,
	 -27811648,
	 -27946656,
	 -28081664,
	 -28216672,
	 -28351680,
	 -28486688,
	 -28621696,
	 -28756704,
	 -28891712,
	 -29026720,
	 -29161728,
	 -29296736,
	 -29431744,
	 -29566752,
	 -29701760,
	 -29836768,
	 -29971776,
	 -30106784,
	 -30241792,
	 -30376800,
	 -30511808,
	 -30646816,
	 -30781824,
	 -30916832,
	 -31051840,
	 -31186848,
	 -31321856,
	 -31456864,
	 -31591872,
	 -31726880,
	 -31861888,
	 -31996896,
	 -32131904,
	 -32266912,
	 -32401920,
	 -32536928,
	 -32671936,
	 -32806944,
	 -32941952,
	 -33076960,
	 -33211968,
	 -33346976,
	 -33481984,
	 -33616992,
	 -33752000,
	 -33887008,
	 -34022016,
	 -34157024,
	 -34292032,
	 -34427040,
};

const int FastRGB24toYUV420Converter::R8[] =
{
	         0,
	    -26208,
	    -52416,
	    -78624,
	   -104832,
	   -131040,
	   -157248,
	   -183456,
	   -209664,
	   -235872,
	   -262080,
	   -288288,
	   -314496,
	   -340704,
	   -366912,
	   -393120,
	   -419328,
	   -445536,
	   -471744,
	   -497952,
	   -524160,
	   -550368,
	   -576576,
	   -602784,
	   -628992,
	   -655200,
	   -681408,
	   -707616,
	   -733824,
	   -760032,
	   -786240,
	   -812448,
	   -838656,
	   -864864,
	   -891072,
	   -917280,
	   -943488,
	   -969696,
	   -995904,
	  -1022112,
	  -1048320,
	  -1074528,
	  -1100736,
	  -1126944,
	  -1153152,
	  -1179360,
	  -1205568,
	  -1231776,
	  -1257984,
	  -1284192,
	  -1310400,
	  -1336608,
	  -1362816,
	  -1389024,
	  -1415232,
	  -1441440,
	  -1467648,
	  -1493856,
	  -1520064,
	  -1546272,
	  -1572480,
	  -1598688,
	  -1624896,
	  -1651104,
	  -1677312,
	  -1703520,
	  -1729728,
	  -1755936,
	  -1782144,
	  -1808352,
	  -1834560,
	  -1860768,
	  -1886976,
	  -1913184,
	  -1939392,
	  -1965600,
	  -1991808,
	  -2018016,
	  -2044224,
	  -2070432,
	  -2096640,
	  -2122848,
	  -2149056,
	  -2175264,
	  -2201472,
	  -2227680,
	  -2253888,
	  -2280096,
	  -2306304,
	  -2332512,
	  -2358720,
	  -2384928,
	  -2411136,
	  -2437344,
	  -2463552,
	  -2489760,
	  -2515968,
	  -2542176,
	  -2568384,
	  -2594592,
	  -2620800,
	  -2647008,
	  -2673216,
	  -2699424,
	  -2725632,
	  -2751840,
	  -2778048,
	  -2804256,
	  -2830464,
	  -2856672,
	  -2882880,
	  -2909088,
	  -2935296,
	  -2961504,
	  -2987712,
	  -3013920,
	  -3040128,
	  -3066336,
	  -3092544,
	  -3118752,
	  -3144960,
	  -3171168,
	  -3197376,
	  -3223584,
	  -3249792,
	  -3276000,
	  -3302208,
	  -3328416,
	  -3354624,
	  -3380832,
	  -3407040,
	  -3433248,
	  -3459456,
	  -3485664,
	  -3511872,
	  -3538080,
	  -3564288,
	  -3590496,
	  -3616704,
	  -3642912,
	  -3669120,
	  -3695328,
	  -3721536,
	  -3747744,
	  -3773952,
	  -3800160,
	  -3826368,
	  -3852576,
	  -3878784,
	  -3904992,
	  -3931200,
	  -3957408,
	  -3983616,
	  -4009824,
	  -4036032,
	  -4062240,
	  -4088448,
	  -4114656,
	  -4140864,
	  -4167072,
	  -4193280,
	  -4219488,
	  -4245696,
	  -4271904,
	  -4298112,
	  -4324320,
	  -4350528,
	  -4376736,
	  -4402944,
	  -4429152,
	  -4455360,
	  -4481568,
	  -4507776,
	  -4533984,
	  -4560192,
	  -4586400,
	  -4612608,
	  -4638816,
	  -4665024,
	  -4691232,
	  -4717440,
	  -4743648,
	  -4769856,
	  -4796064,
	  -4822272,
	  -4848480,
	  -4874688,
	  -4900896,
	  -4927104,
	  -4953312,
	  -4979520,
	  -5005728,
	  -5031936,
	  -5058144,
	  -5084352,
	  -5110560,
	  -5136768,
	  -5162976,
	  -5189184,
	  -5215392,
	  -5241600,
	  -5267808,
	  -5294016,
	  -5320224,
	  -5346432,
	  -5372640,
	  -5398848,
	  -5425056,
	  -5451264,
	  -5477472,
	  -5503680,
	  -5529888,
	  -5556096,
	  -5582304,
	  -5608512,
	  -5634720,
	  -5660928,
	  -5687136,
	  -5713344,
	  -5739552,
	  -5765760,
	  -5791968,
	  -5818176,
	  -5844384,
	  -5870592,
	  -5896800,
	  -5923008,
	  -5949216,
	  -5975424,
	  -6001632,
	  -6027840,
	  -6054048,
	  -6080256,
	  -6106464,
	  -6132672,
	  -6158880,
	  -6185088,
	  -6211296,
	  -6237504,
	  -6263712,
	  -6289920,
	  -6316128,
	  -6342336,
	  -6368544,
	  -6394752,
	  -6420960,
	  -6447168,
	  -6473376,
	  -6499584,
	  -6525792,
	  -6552000,
	  -6578208,
	  -6604416,
	  -6630624,
	  -6656832,
	  -6683040,
};
